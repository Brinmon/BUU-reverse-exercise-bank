+===========+=============================+
| Title     | SGS-ASM Reference Document  |
+-----------+-----------------------------+
| Author    | blackcat (a.k.a. Br41nD34d) |
+-----------+-----------------------------+
| Revision  | 0 (candidate)               |
+-----------+-----------------------------+
| Date      | 2017-01-10                  |
+-----------+-----------------------------+
| Status    | Confidential                |
+-----------+-----------------------------+
| Copyright | © 2017 The SGS Company      |
+===========+=============================+

This is the reference document of Secure-Garden-Shed Assembly Language (SGS-ASM)


Table of contents

    I - SGS-ASM insructions
        1. Table of instructions
        2. Instructions encoding
    II - SGS-ASM limits
        1. Stack size limit
        2. Integer size limit
    III - SGS-ASM registers

I - SGS-ASM instructions

I.1 - Table of instructions


+===+=======+==============+==============+========+============+================+
| # | instr | arg1         | arg2         | arg3   | status     | registers used |
+===+=======+==============+==============+========+============+================+
| 0 | RES   | val          | -            | -      | used       | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 1 | CPY   | type         | offset       | offset | used       | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 2 | RED   | offset       | -            | -      | used       | status in rF   |
+---+-------+--------------+--------------+--------+------------+----------------+
| 3 | ECH   | offset       | -            | -      | used       | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 4 | EXT   | (val|offset) | -            | -      | used       | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 5 | LOD   | offset       | (val|offset) | -      | used       | result in rR   |
+---+-------+--------------+--------------+--------+------------+----------------+
| 6 | AFT   | (val|offset) | offset       | -      | used       | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 7 | AFT.B | (val|offset) | offset       | -      | deprecated | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 8 | EQU   | (val|offset) | (val|offset) | -      | used       | result in rF   |
+---+-------+--------------+--------------+--------+------------+----------------+
| 9 | GTH   | (val|offset) | (val|offset) | -      | used       | result in rF   |
+---+-------+--------------+--------------+--------+------------+----------------+
| A | LTH   | (val|offset) | (val|offset) | -      | used       | result in rF   |
+---+-------+--------------+--------------+--------+------------+----------------+
| B | NOT   | (val|offset) | -            | -      | used       | result in rF   |
+---+-------+--------------+--------------+--------+------------+----------------+
| C | JMP   | val          | -            | -      | used       | if rF is TRUE  |
+---+-------+--------------+--------------+--------+------------+----------------+
| D | ADD   | (val|offset) | (val|offset) |        | used       | result in rR   |
+---+-------+--------------+--------------+--------+------------+----------------+
| E | SUB   | (val|offset) | (val|offset) |        | used       | result in rR   |
+---+-------+--------------+--------------+--------+------------+----------------+
| F | NOP   | -            | -            | -      | used       | -              |
+===+=======+==============+==============+========+============+================+

I.2 - Instructions encoding

+===============================================================================================================+
|                                               32 bits length                                                  |
+================+==========================+=================================+=================================+
| instr (4 bits) | type (2 bits) [optional] | val|offset (13 bits) [optional] | val|offset (13 bits) [optional] |
+================+==========================+=================================+=================================+

II - SGS-ASM limits

II.1 - Stack size limit

    Stack size cannot exceed 8192 octets

II.1 - Integer size limit

    Integer value must be limited to the range [-4095;4095]

III - SGS-ASM registers

    rR : result register (offset 0)
    rF : flag register (offset 4)
	
	
这是《Secure-Garden-Shed Assembly Language (SGS-ASM)》的参考文档。

目录
I - SGS-ASM 指令
    1. 指令表
    2. 指令编码
II - SGS-ASM 限制
    1. 栈大小限制
    2. 整数大小限制
III - SGS-ASM 寄存器
I - SGS-ASM 指令

I.1 - 指令表
+===+=======+==============+==============+========+============+================+
| # | 指令  | 参数1        | 参数2         | 参数3   | 状态       | 使用的寄存器   |
+===+=======+==============+==============+========+============+================+
| 0 | RES   | val          | -            | -      | 使用中     | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 1 | CPY   | type         | offset       | offset | 使用中     | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 2 | RED   | offset       | -            | -      | 使用中     | 状态在 rF 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| 3 | ECH   | offset       | -            | -      | 使用中     | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 4 | EXT   | (val|offset) | -            | -      | 使用中     | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 5 | LOD   | offset       | (val|offset) | -      | 使用中     | 结果在 rR 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| 6 | AFT   | (val|offset) | offset       | -      | 使用中     | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 7 | AFT.B | (val|offset) | offset       | -      | 废弃       | -              |
+---+-------+--------------+--------------+--------+------------+----------------+
| 8 | EQU   | (val|offset) | (val|offset) | -      | 使用中     | 结果在 rF 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| 9 | GTH   | (val|offset) | (val|offset) | -      | 使用中     | 结果在 rF 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| A | LTH   | (val|offset) | (val|offset) | -      | 使用中     | 结果在 rF 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| B | NOT   | (val|offset) | -            | -      | 使用中     | 结果在 rF 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| C | JMP   | val          | -            | -      | 使用中     | 若 rF 为 TRUE  |
+---+-------+--------------+--------------+--------+------------+----------------+
| D | ADD   | (val|offset) | (val|offset) |        | 使用中     | 结果在 rR 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| E | SUB   | (val|offset) | (val|offset) |        | 使用中     | 结果在 rR 中   |
+---+-------+--------------+--------------+--------+------------+----------------+
| F | NOP   | -            | -            | -      | 使用中     | -              |
+===+=======+==============+==============+========+============+================+

I.2 - 指令编码

+===============================================================================================================+
|                                               32 位长度                                                       |
+================+==========================+=================================+=================================+
| instr (4 位)   | type (2 位) [可选]       | val|offset (13 位) [可选]         | val|offset (13 位) [可选]     |
+================+==========================+=================================+=================================+

II - SGS-ASM 限制

II.1 - 栈大小限制

    栈的大小不能超过 8192 个八位字节（octets）。

II.2 - 整数大小限制

    整数的取值范围必须限制在 [-4095，4095]。

III - SGS-ASM 寄存器

    rR：结果寄存器（偏移量为 0）
    rF：标志寄存器（偏移量为 4）
	

